imports:

- classpath:/common/directors.yaml
- classpath:/common/groovy/actors.yaml

components:

# actors

<%include file="wpsActors.yaml"/>

# workflow

- id: ZeroWorkflow
  type: Workflow
  properties:
    director: !ref MTDataDrivenDirector
    nodes:
    - !ref DownloadData
    - !ref RunProcess
    - !ref WriteResult

- id: DownloadData
  type: Node
  properties:
    actor: !ref ConstantSource
    constants:
      value: 
        - http://localhost:8090/files/test1.nc
    outflows:
      value: /source/

- id: RunProcess
  type: Node
  properties:
    actor: !ref WpsExecute
    constants:
      service: ${service}
      identifier: ${identifier}
      input: ${input}
      output: ${output}
    inflows:
      source: /source/
    outflows:
      result: /wps/  
 
- id: WriteResult
  type: GroovyActorNode
  properties:
    actor.step: |
      f = new File("wps_output.txt")
      f.write( result )
    inflows:
      result: /wps/


