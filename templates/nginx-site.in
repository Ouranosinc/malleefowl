# pywps web processing service
upstream pywps_server {
    # socket connection
    server ${parts.pywps.server} fail_timeout=0;
}

# caching
#proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=microcache:30m max_size=1000m;

server 
{
    listen ${parts.ports.http};
    server_name _;

    root /usr/share/nginx/www;      
    index index.php index.html index.htm;

    # PyWPS ...
    # ---------

    # pywps avail at /wps
    location /wps 
    {
        proxy_pass              http://pywps_server;
    }

    # WPS Outputs
    location /wpsoutputs
    {
        alias ${parts.pywps_config.output_path};
    }

    # published data
    location /files
    {
        alias ${parts.pywps_config.files_path};
        autoindex on;
    }

}
