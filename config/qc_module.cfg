[buildout]

extensions +=
    mr.developer

auto-checkout += 
    qc-processes

parts +=
    qc_eggs
    qc_install
    qc_doc_gen
    qc_doc_build

[qc_eggs]
recipe = z3c.recipe.scripts
eggs =
     qc-processes

[sources]
qc-processes = git git://redmine.dkrz.de/qc-processes.git

[malleefowl]
eggs += qc-processes

[qc_install]
recipe = collective.recipe.cmd
on_install = true
on_update = true
cmds =
      /opt/anaconda/bin/python ${buildout:directory}/src/qc-processes/compile_qctool.py /opt/anaconda

[qc_doc_gen]
recipe = collective.recipe.sphinxbuilder
source = ${buildout:directory}/src/qc-processes/documentation/source
extra-paths =
         ${buildout:directory}/eggs/*
build = ${buildout:directory}/src/qc-processes/documentation/build
outputs = 
    html

[qc_doc_build]
recipe = collective.recipe.cmd
on_install = true
on_update = true
cmds =
     ${buildout:directory}/bin/qc_doc_gen 

[conda_packages]
cmds += 
    sudo /opt/anaconda/bin/conda install --yes paramiko
    sudo /opt/anaconda/bin/pip install -i https://pypi.binstar.org/pypi/simple python-swiftclient==1.8 --upgrade

[addons_py]
cmds +=
     echo execfile\(\"${buildout:directory}/src/qc-processes/wps_defintions/quality_processes.py\"\) >> ${addons:filename}
     echo execfile\(\"${buildout:directory}/src/qc-processes/wps_defintions/pidmanager_processes.py\"\) >> ${addons:filename}
